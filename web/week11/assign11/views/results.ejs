<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <style>
        html {
            background-color: black;
            color: #BEBDB8;
        }

        body {
            background-color: black;
        }

        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
            background-color: black;
        }

        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            background-color: black;
            color: #BEBDB8;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }

        h1 {
            text-align: center;
            color: #BEBDB8;
        }

        h2 {
            text-align: center;
            font-size: 50px;
        }

        h3 {
            text-align: center;
            color: #BEBDB8;
        }

        h5 {
            text-align: right;
            color: #BEBDB8;
        }

        th {
            text-align: center;
            font-size: 20px;
        }

        table {
            width: 95%;
        }
    </style>
</head>

<body>
    <input type="text" id="username" name='username' placeholder="Username?"></input>
    <button onclick="getStuff()">Get Table!</button>
    <p id="results"></p>
</body>
<script text="text/javascript">
    function getStuff() {
        /*$.get('/getResults', function (data) {
            console.log("Back from the server with: ");
            console.log(data.rows[0]); 
            console.log(data.rows[0].lastname); 

            var word = "";
            for (let i = 0; i < data.rows.length; i++)
            {
                word += "<h4>" + data.rows[i].firstname + "</h4>";
                word += "<h4>" + data.rows[i].lastname + "</h4>";
            }
            $("#results").html(word);
        });*/
        $.ajax({url: '/getTable', 
        type: 'POST',
        dataType: 'json',
        success: (data) => {
            console.log(data);
            username = document.getElementById("username").value;
            console.log(username);
            var newHTML = "";
            newHTML += "<table>";
            if (username == 'Smith30') {
                for (let i = 0; i < data.rows.length; i++) {
                    newHTML += "<tr>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].firstname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].lastname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].age + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].title + "</td>" + "</h4>";
                    newHTML += "</tr>";
                }
                $("#results").html(newHTML);
            }
            else if (username == 'Limber45' || username == 'Ander22' || username == 'Smith35') {
                for (let i = 1; i < data.rows.length; i++) {
                    newHTML += "<tr>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].firstname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].lastname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].age + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].title + "</td>" + "</h4>";
                    newHTML += "</tr>";
                }
                $("#results").html(newHTML);
            }
            else if (username == 'Denis37' || username == 'France30' || username == 'Kent25') {
                for (let i = 4; i < data.rows.length; i++) {
                    newHTML += "<tr>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].firstname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].lastname + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].age + "</td>" + "</h4>";
                    newHTML += "<h4>" + "<td>" + data.rows[i].title + "</td>" + "</h4>";
                    newHTML += "</tr>";
                }
                $("#results").html(newHTML);
            }
            newHTML += "</table>";
        }
    });
}
</script>

</html>